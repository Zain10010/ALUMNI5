{% extends "base.html" %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h1>Alumni List</h1>
        <a href="{{ url_for('add_alumni') }}" class="btn btn-primary">Add New Alumni</a>
    </div>

    <div class="form-group">
        <input type="text" id="searchInput" class="form-control" placeholder="Search alumni...">
    </div>

    <table class="table" id="alumniTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Department</th>
                <th>Graduation Year</th>
                <th>Current Employer</th>
                <th>Job Title</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for alumni in alumni %}
            <tr>
                <td>{{ alumni.first_name }} {{ alumni.last_name }}</td>
                <td>{{ alumni.email }}</td>
                <td>{{ alumni.department }}</td>
                <td>{{ alumni.graduation_year }}</td>
                <td>{{ alumni.current_employer or 'Not provided' }}</td>
                <td>{{ alumni.job_title or 'Not provided' }}</td>
                <td class="actions">
                    <a href="{{ url_for('alumni_profile', id=alumni.id) }}" class="btn btn-primary" title="View Profile">
                        <i class="fas fa-eye"></i>
                    </a>
                    <a href="{{ url_for('edit_alumni', id=alumni.id) }}" class="btn btn-primary" title="Edit Profile">
                        <i class="fas fa-edit"></i>
                    </a>
                    <form action="{{ url_for('delete_alumni', id=alumni.id) }}" method="POST" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this alumni record?');">
                        <button type="submit" class="btn btn-delete" title="Delete Profile">
                            <i class="fas fa-trash"></i>
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
document.getElementById('searchInput').addEventListener('keyup', function() {
    var input = this.value.toLowerCase();
    var table = document.getElementById('alumniTable');
    var rows = table.getElementsByTagName('tr');

    for (var i = 1; i < rows.length; i++) {
        var row = rows[i];
        var cells = row.getElementsByTagName('td');
        var found = false;

        for (var j = 0; j < cells.length; j++) {
            var cell = cells[j];
            if (cell.textContent.toLowerCase().indexOf(input) > -1) {
                found = true;
                break;
            }
        }

        row.style.display = found ? '' : 'none';
    }
});
</script>
{% endblock %} 